!function(t){function e(n){if(a[n])return a[n].exports;var r=a[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var a={};e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,a){"use strict";var n=a(3);t.exports=function(t){t.x.domain(t.data.map(function(t){return t.key})),t.y.domain([0,d3.max(t.data,function(t){return t.value})]),n.call(this,t),this.selectAll(".bar").data(t.data).enter().append("rect").classed("bar",!0),this.selectAll(".bar-label").data(t.data).enter().append("text").classed("bar-label",!0),this.selectAll(".bar").transition().duration(1500).ease("bounce").delay(500).attr("x",function(e,a){return t.x(e.key)}).attr("y",function(e,a){return t.y(e.value)}).attr("width",function(e,a){return t.x.rangeBand()}).attr("height",function(e,a){return t.height-t.y(e.value)}).style("fill",function(e,a){return t.ordinalColorScale(a)}),this.selectAll(".bar-label").transition().duration(1500).ease("bounce").delay(500).attr("x",function(e,a){return t.x(e.key)+t.x.rangeBand()/2}).attr("dx",0).attr("y",function(e,a){return t.y(e.value)}).attr("dy",function(t,e){return t.value<1?-10:50}).style("fill",function(t,e){return t.value<1?"red":"white"}).text(function(t,e){return t.value}),this.selectAll(".bar").data(t.data).exit().remove(),this.selectAll(".bar-label").data(t.data).exit().remove()}},,,function(t,e,a){"use strict";t.exports=function(t){!0===t.initialize?(this.append("g").classed("gridline",!0).attr("transform","translate(0,0)").call(t.gridlines),this.append("g").classed("x axis",!0).attr("transform","translate(0,"+t.height+")").call(t.axis.x).selectAll("text").classed("x-axis-label",!0).style("text-anchor","end").attr("dx",-8).attr("dy",8).attr("transform","translate(0,0) rotate(-60)"),this.append("g").classed("y axis",!0).attr("transform","translate(0,0)").call(t.axis.y).selectAll("text").classed("y-axis-label",!0).style("text-anchor","end"),this.select(".y.axis").append("text").text("Votes").classed("y-axis-anchor",!0).attr("x",-t.height/2).attr("y",-40).style("text-anchor","middle").attr("transform","rotate(-90)")):!1===t.initialize&&(this.selectAll("g.x.axis").transition().duration(1500).ease("bounce").delay(500).call(t.axis.x),this.selectAll(".x-axis-label").style("text-anchor","end").attr("transform","translate(0,0) rotate(-60)"),this.selectAll("g.y.axis").transition().duration(1500).ease("bounce").delay(500).call(t.axis.y))}},function(t,e,a){"use strict";function n(t){var e=JSON.parse(document.getElementById("poll_data").value),a=e.options.map(function(t,e){return{key:t[0],value:t[1]}}),n=d3.max(a,function(t){return t.value}),c=d3.scale.ordinal().domain(a.map(function(t){return t.key})).rangeBands([0,o]),u=d3.scale.linear().domain([0,d3.max(a,function(t){return t.value})]).range([d,0]),x=d3.svg.axis().scale(u).tickSize(-o,0,0).tickFormat("").orient("left").ticks(n),h=(d3.scale.linear().domain([0,a.length]).range(["#572500","#F68026"]),d3.scale.category20()),f=d3.svg.axis().scale(c).orient("bottom").tickSize(0),p=d3.svg.axis().scale(u).orient("left").ticks(n),y=d3.select("#graph").append("svg").attr("id","chart").attr("width",i).attr("height",l),g=y.append("g").classed("display",!0).attr("transform","translate("+s.left+", "+s.top+")"),m=d3.select("#graph").append("div").attr("id","controls"),v=m.append("button").html("Sort data: ascending").attr("state",0);g.append("text").classed("chart-title",!0).html(e.title).attr("x",o/2).attr("y",-40).attr("transform","translate(0,0)").style("text-anchor","middle"),r.call(g,{data:a,x:c,y:u,height:d,axis:{x:f,y:p},ordinalColorScale:h,gridlines:x,initialize:!0}),v.on("click",function(){var t=d3.select(this),e=function(t,e){return t.value-e.value},n=function(t,e){return e.value-t.value},i=+t.attr("state"),l="Sort data: ",s=null;0===i?(s=a.sort(e),i=1,l+="descending"):1===i&&(s=a.sort(n),i=0,l+="ascending"),t.attr("state",i),t.html(l),r.call(g,{data:s,x:c,y:u,height:d,axis:{x:f,y:p},ordinalColorScale:h,gridlines:x,initialize:!1})})}var r=a(0);document.addEventListener("DOMContentLoaded",n);var i=(window.innerWidth,+window.innerWidth>1500?+window.innerWidth/1.5:+window.innerWidth),l=+window.innerHeight/1.2,s={top:100,bottom:80,left:80,right:40},o=i-s.left-s.right,d=l-s.top-s.bottom}]);