!function(t){function e(n){if(a[n])return a[n].exports;var r=a[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var a={};e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}({2:function(t,e,a){"use strict";function n(t){function e(t){!0===t.initialize?(this.append("g").classed("gridline",!0).attr("transform","translate(0,0)").call(t.gridlines),this.append("g").classed("x axis",!0).attr("transform","translate(0,"+o+")").call(t.axis.x).selectAll("text").classed("x-axis-label",!0).style("text-anchor","end").attr("dx",-8).attr("dy",8).attr("transform","translate(0,0) rotate(-45)"),this.append("g").classed("y axis",!0).attr("transform","translate(0,0)").call(t.axis.y),this.select(".y.axis").append("text").text("Votes").attr("x",-o/2).attr("y",-40).style("text-anchor","middle").attr("transform","rotate(-90)")):!1===t.initialize&&(this.selectAll("g.x.axis").transition().duration(1500).ease("bounce").delay(500).call(t.axis.x),this.selectAll(".x-axis-label").style("text-anchor","end").attr("transform","translate(0,0) rotate(-45)"),this.selectAll("g.y.axis").transition().duration(1500).ease("bounce").delay(500).call(t.axis.y))}function a(t){u.domain(d.map(function(t){return t.key})),f.domain([0,d3.max(d,function(t){return t.value})]),e.call(this,t),this.selectAll(".bar").data(t.data).enter().append("rect").classed("bar",!0),this.selectAll(".bar-label").data(t.data).enter().append("text").classed("bar-label",!0),this.selectAll(".bar").transition().duration(1500).ease("bounce").delay(500).attr("x",function(t,e){return u(t.key)}).attr("y",function(t,e){return f(t.value)}).attr("width",function(t,e){return u.rangeBand()}).attr("height",function(t,e){return o-f(t.value)}).style("fill",function(t,e){return p(e)}),this.selectAll(".bar-label").transition().duration(1500).ease("bounce").delay(500).attr("x",function(t,e){return u(t.key)+u.rangeBand()/2}).attr("dx",0).attr("y",function(t,e){return f(t.value)}).attr("dy",function(t,e){return t.value<15?0:15}).style("fill",function(t,e){return t.value<15?"red":"white"}).text(function(t,e){return t.value}),this.selectAll(".bar").data(t.data).exit().remove(),this.selectAll(".bar-label").data(t.data).exit().remove()}var n=JSON.parse(document.getElementById("poll_data").value),d=n.options.map(function(t,e){return{key:t[0],value:t[1]}}),c=d3.max(d,function(t){return t.value}),u=d3.scale.ordinal().domain(d.map(function(t){return t.key})).rangeBands([0,s]),f=d3.scale.linear().domain([0,d3.max(d,function(t){return t.value})]).range([o,0]),x=d3.svg.axis().scale(f).tickSize(-s,0,0).tickFormat("").orient("left").ticks(c),p=(d3.scale.linear().domain([0,d.length]).range(["#572500","#F68026"]),d3.scale.category20()),h=d3.svg.axis().scale(u).orient("bottom").tickSize(0),m=d3.svg.axis().scale(f).orient("left").ticks(c),g=d3.select("#graph").append("svg").attr("id","chart").attr("width",r).attr("height",l),y=g.append("g").classed("display",!0).attr("transform","translate("+i.left+", "+i.top+")"),v=d3.select("#graph").append("div").attr("id","controls"),b=v.append("button").html("Sort data: ascending").attr("state",0);y.append("text").classed("chart-title",!0).html(n.title).attr("x",s/2).attr("y",-40).attr("transform","translate(0,0)").style("text-anchor","middle"),b.on("click",function(){var t=d3.select(this),e=function(t,e){return t.value-e.value},n=function(t,e){return e.value-t.value},r=+t.attr("state"),l="Sort data: ",i=null;0===r?(i=d.sort(e),r=1,l+="descending"):1===r&&(i=d.sort(n),r=0,l+="ascending"),t.attr("state",r),t.html(l),a.call(y,{data:i,axis:{x:h,y:m},gridlines:x,initialize:!1})}),a.call(y,{data:d,axis:{x:h,y:m},gridlines:x,initialize:!0})}document.addEventListener("DOMContentLoaded",n);var r=+window.innerWidth/1.5,l=+window.innerHeight/1.2,i={top:100,bottom:80,left:80,right:40},s=r-i.left-i.right,o=l-i.top-i.bottom}});