!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,n){"use strict";var a=n(4);e.exports=function(e){e.x.domain(e.data.map(function(e){return e.key})),e.y.domain([0,d3.max(e.data,function(e){return e.value})]),a.call(this,e),this.selectAll(".bar").data(e.data).enter().append("rect").classed("bar",!0),this.selectAll(".bar-label").data(e.data).enter().append("text").classed("bar-label",!0),this.selectAll(".bar").transition().duration(1500).ease("bounce").delay(500).attr("x",function(t,n){return e.x(t.key)}).attr("y",function(t,n){return e.y(t.value)}).attr("width",function(t,n){return e.x.rangeBand()}).attr("height",function(t,n){return e.height-e.y(t.value)}).style("fill",function(t,n){return e.ordinalColorScale(n)}),this.selectAll(".bar-label").transition().duration(1500).ease("bounce").delay(500).attr("x",function(t,n){return e.x(t.key)+e.x.rangeBand()/2}).attr("dx",0).attr("y",function(t,n){return e.y(t.value)}).attr("dy",function(e,t){return e.value<1?-10:50}).style("fill",function(e,t){return e.value<1?"rgba(255,255,255,0)":"white"}).text(function(e,t){return e.value}),this.selectAll(".bar").data(e.data).exit().remove(),this.selectAll(".bar-label").data(e.data).exit().remove()}},function(e,t,n){"use strict";e.exports=function(e){function t(e){window.event&&(e=window.event);var t=document.getElementById(g),p=parseInt(null!=e.target.id?e.target.id:0),y=isNaN(p);if(null!=e.target.id&&y)switch(e.target.id){case u:n(t);break;case d:a(e);break;case c:l(e);case f:i(e);break;case m+"_btn":o(t);break;case m:s(t)}if(null!=e.target.className&&!y)switch(e.target.className){case h:r(e)}}function n(t){if(!document.getElementById(c)){if(document.getElementById(m))return void document.getElementById(d).click();document.querySelector(".form__container__options.selected")&&(document.querySelector(".form__container__options.selected").className="form__container__options"),l(e);var n=document.createElement("input"),a=document.createElement("div"),r=document.createElement("div");n.className="form__wrapper__options",n.maxLength=25,n.setAttribute("id",c),n.name="newOption",a.className="form__wrapper__cancel btn btn--medium btn--full",a.setAttribute("id",d),a.innerHTML="Cancel",r.appendChild(n),r.appendChild(a),r.className="form__wrapper",t.insertBefore(r,t.lastChild),n.focus()}}function a(e){var t=e.target.parentNode.parentNode,n=e.target.parentNode;document.getElementsByClassName("warning").length>0&&t.removeChild(t.lastChild.previousSibling),n.style.width="0px",e.target.style.width="0px",e.target.style.color="#fff",e.target.style.textShadow="none",setTimeout(function(){n.removeChild(n.lastChild),n.firstChild.value="",n.firstChild.style.width="0px"},50),setTimeout(function(){t.removeChild(t.lastChild.previousSibling),t.lastChild.value="Submit Vote"},500)}function r(e){var t=document.getElementById(p);l(e),t.value=e.target.id;for(var n=document.getElementsByClassName("form__container__options"),a=document.getElementById(c),r=document.getElementById(m),i=n.length,o=0;o<i;o++)n.item(o).className=h;(a||r)&&document.getElementById(d).click(),e.target.className=e.target.className+" selected"}function l(e){var t=document.getElementById("fs");document.getElementsByClassName("warning").length>0&&t.removeChild(t.lastChild.previousSibling)}function i(e){function t(e){var t=document.getElementById("fs"),r=document.createElement("div");switch(r.className="warning",r.style.color="red",e){case n:r.innerHTML="Input new option or close the input field!";break;case a:r.innerHTML="Please select or add one option!";break;default:r.innerHTML="Unexpected error. Try reloading the page."}t.insertBefore(r,t.lastChild)}var n="empty",a="no_value",r=null;null!=(r=document.getElementById(c))?""!==r.value?document.getElementById(p).value=100:""===r.value&&"new_option"!==e.target.id&&(e.preventDefault(),document.getElementsByClassName("warning").length>0||t(n)):document.querySelector(".form__container__options.selected")||"delete"===document.getElementById(p).value||(e.preventDefault(),document.getElementsByClassName("warning").length>0||t(a))}function o(e){if(document.getElementById(c))return void document.getElementById(d).click();if(!document.getElementById(m)){document.querySelector(".form__container__options.selected")&&(document.querySelector(".form__container__options.selected").className="form__container__options");var t=document.createElement("input"),n=document.createElement("div"),a=document.createElement("div");t.className="form__wrapper__delete btn btn--medium btn--full",t.value="Delete",t.name="delete_poll",t.setAttribute("id",m),n.className="form__wrapper__cancel-delete btn btn--medium btn--full",n.setAttribute("id",d),n.innerHTML="Cancel",a.appendChild(t),a.appendChild(n),a.className="form__wrapper",e.insertBefore(a,e.lastChild)}}function s(e){document.getElementById(p).value="delete",e.lastChild.click()}var d="cancel_option",c="new_option",u="add",m="delete",f="submit",p="voted_option",g="fs",h="form__container__options";document.getElementById("poll_form").addEventListener("click",t)}},,,function(e,t,n){"use strict";e.exports=function(e){!0===e.initialize?(this.append("g").classed("gridline",!0).attr("transform","translate(0,0)").call(e.gridlines),this.append("g").classed("x axis",!0).attr("transform","translate(0,"+e.height+")").call(e.axis.x).selectAll("text").classed("x-axis-label",!0).style("text-anchor","end").attr("dx",-8).attr("dy",8).style("fill",function(t,n){return e.ordinalColorScale(n)}).attr("transform","translate(0,0) rotate(-60)"),this.append("g").classed("y axis",!0).attr("transform","translate(0,0)").call(e.axis.y).selectAll("text").classed("y-axis-label",!0).style("text-anchor","end"),this.select(".y.axis").append("text").text("Votes").classed("y-axis-anchor",!0).attr("x",-e.height/2).attr("y",-40).style("text-anchor","middle").attr("transform","rotate(-90)")):!1===e.initialize&&(this.selectAll("g.x.axis").transition().duration(1500).ease("bounce").delay(500).call(e.axis.x),this.selectAll(".x-axis-label").style("text-anchor","end").style("fill",function(t,n){return e.ordinalColorScale(n)}).attr("transform","translate(0,0) rotate(-60)"),this.selectAll("g.y.axis").transition().duration(1500).ease("bounce").delay(500).call(e.axis.y))}},function(e,t,n){"use strict";function a(){var e=/(.*\?url=\w*)[^&?.*]/.exec(window.location.href)[0]+".json";d3.xhr(e,r)}function r(e){setTimeout(function(){var e=null;(e=document.getElementById("error"))&&(e.style.opacity="0")},3e3);var t=(window.innerWidth,+window.innerWidth>660?.7*+window.innerWidth:+window.innerWidth),n=+window.innerHeight/1.2,a={top:100,bottom:120,left:+window.innerWidth<999?40:80,right:20},r=t-a.left-a.right,i=n-a.top-a.bottom,o=JSON.parse(e.response).data,s=o.options.map(function(e,t){return{key:e[0],value:e[1]}}),d=d3.max(s,function(e){return e.value}),c=d3.scale.ordinal().domain(s.map(function(e){return e.key})).rangeBands([0,r]),u=d3.scale.linear().domain([0,d3.max(s,function(e){return e.value})]).range([i,0]),m=d3.svg.axis().scale(u).tickSize(-r,0,0).tickFormat("").orient("left").ticks(d),f=(d3.scale.linear().domain([0,s.length]).range(["#572500","#F68026"]),d3.scale.category20()),p=d3.svg.axis().scale(c).orient("bottom").tickSize(0),g=d3.svg.axis().scale(u).orient("left").ticks(d),h=d3.select("#graph").append("svg").attr("id","chart").attr("width",t).attr("height",n),y=h.append("g").classed("display",!0).attr("transform","translate("+a.left+", "+a.top+")"),v=d3.select(".container__right").append("div").attr("id","controls"),x=v.append("button").html("Sort data: ascending").attr("state",0);y.append("text").classed("chart-title",!0).html(o.title).attr("x",r/2).attr("y",-40).attr("transform","translate(0,0)").style("text-anchor","middle"),l.call(y,{data:s,x:c,y:u,height:i,axis:{x:p,y:g},ordinalColorScale:f,gridlines:m,initialize:!0}),x.on("click",function(){var e=d3.select(this),t=function(e,t){return e.value-t.value},n=function(e,t){return t.value-e.value},a=+e.attr("state"),r="Sort data: ",o=null;0===a?(o=s.sort(t),a=1,r+="descending"):1===a&&(o=s.sort(n),a=0,r+="ascending"),e.attr("state",a),e.html(r),l.call(y,{data:o,x:c,y:u,height:i,axis:{x:p,y:g},ordinalColorScale:f,gridlines:m,initialize:!1})})}var l=n(0),i=n(1);document.addEventListener("DOMContentLoaded",i),document.addEventListener("DOMContentLoaded",a)}]);